(()=>{"use strict";const e=document.querySelector(".menu-btn"),t=document.querySelector(".burger"),n=document.querySelector(".overlay");let s=!0;const o=()=>{const e=document.querySelectorAll(".menu-btn__dash_pets");console.log(e),e.forEach((e=>{e.classList.remove("menu-btn__dash_pets-active")}))},c=()=>{t.classList.toggle("burger_active"),n.classList.toggle("overlay_active"),e.classList.toggle("menu-btn_active"),document.body.classList.add("deleteScroll"),s=!1,(()=>{const e=document.querySelectorAll(".menu-btn__dash_pets");console.log(e),e.forEach((e=>{e.classList.add("menu-btn__dash_pets-active")}))})()},l=()=>{t.classList.toggle("burger_active"),n.classList.toggle("overlay_active"),e.classList.toggle("menu-btn_active"),document.body.classList.remove("deleteScroll"),s=!0,o()},i=()=>{e.addEventListener("click",(()=>{s?c():l()})),n.addEventListener("click",(({target:e})=>{e.classList.contains("overlay")&&l()})),document.querySelectorAll(".burger .nav__link").forEach((c=>{c.addEventListener("click",(()=>{t.classList.toggle("burger_active"),n.classList.toggle("overlay_active"),e.classList.toggle("menu-btn_active"),document.body.classList.remove("deleteScroll"),s=!0,o()}))}))},r=e=>{for(let t=e.length-1;t>0;t--){let n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}return e},a=document.querySelector(".overlay-popup"),d=async e=>{const t=await fetch(e);return await t.json()},u=()=>{(document.querySelector(".friends__list")||document.querySelector(".pets")).addEventListener("click",(async({target:e})=>{const t=(e=>e.closest(".friend-card").querySelector(".friend-card__title").textContent.trim())(e),n=((e,t)=>e.find((e=>e.name===t)))(await d("../fonts/pets.json"),t);(({name:e,breed:t,descript:n,image:s,age:o,inoculations:c,diseases:l,parasites:i})=>{const r=document.querySelector(".popup__content"),a=r.querySelector(".popup__title"),d=r.querySelector(".popup__subtitle"),u=r.querySelector(".popup__text"),m=document.querySelector(".popup__img>img"),p=document.querySelector(".age"),_=document.querySelector(".inocul"),g=document.querySelector(".diseas"),f=document.querySelector(".parasite");m.src=s,a.textContent=e,d.textContent=t,u.textContent=n,p.textContent=o,_.textContent=c,g.textContent=l,f.textContent=i;const y=_.offsetWidth,h=_.parentElement.offsetWidth;y+_.previousElementSibling.offsetWidth>h?(_.parentElement.classList.add("li_column"),_.classList.add("value_paddingLeft")):(_.parentElement.classList.remove("li_column"),_.classList.remove("value_paddingLeft"))})(n),a.classList.add("overlay-popup_active"),document.body.classList.add("deleteScroll"),a.addEventListener("click",(({target:e})=>{const t=document.querySelector(".popup__btn");e!==a&&e!==t||(a.classList.add("overlay-popup_delete"),document.body.classList.remove("deleteScroll"),setTimeout((()=>{a.classList.remove("overlay-popup_active"),a.classList.remove("overlay-popup_delete")}),400))}))}))},m=document.querySelector(".pets__list"),p=document.querySelector(".pets-pagination__next"),_=document.querySelector(".pets-pagination__prev"),g=document.querySelector(".pets-pagination__current"),f=document.querySelector(".pets-pagination__start"),y=document.querySelector(".pets-pagination__end"),h=async e=>{m.innerHTML="";const t=await d("../fonts/pets.json"),n=e.map((e=>(({name:e,imageSlider:t})=>{const n=document.createElement("li");return n.className="friend-card",n.insertAdjacentHTML("afterbegin",`\n      <img src=${t} class="friend-card__img">\n      <p class="friend-card__title">\n        ${e}\n      </p>\n      <button class="friend-card__button button">Learn more</button>\n  `),n})(t[e])));m.append(...n)},v=async e=>{const t=(()=>{const e=(e,t)=>e.some((e=>e===t)),t=[];for(;t.length<8;){const n=Math.floor(8*Math.random())+0;e(t,n)||t.push(n)}let n=t.splice(0,3),s=t.splice(0,3),o=t.splice(0,2);const c=(e,t)=>{let n="";for(;n.length<t;){let t=r(e).join("");0===n.length?n+=t:n.length>0&&n.length<=3?n.slice(0,3)!==t&&(n+=t):n.length>3&&n.length<=6?n.slice(0,3)!==t&&n.slice(3,6)!==t&&(n+=t):n.length>6&&n.length<=9?n.slice(0,3)!==t&&n.slice(3,6)!==t&&n.slice(6,9)!==t&&(n+=t):n.length>9&&n.length<=12?n.slice(0,3)!==t&&n.slice(3,6)!==t&&n.slice(6,9)!==t&&n.slice(9,12)!==t&&(n+=t):n.length>12&&n.length<=15?n.slice(0,3)!==t&&n.slice(3,6)!==t&&n.slice(6,9)!==t&&n.slice(9,12)!==t&&n.slice(12,15)!==t&&(n+=t):n.length>15&&n.length<=18&&n.slice(0,3)!==t&&n.slice(3,6)!==t&&n.slice(6,9)!==t&&n.slice(9,12)!==t&&n.slice(12,15)!==t&&n.slice(15,18)!==t&&(n+=t)}return n},l=c(n,18),i=c(s,18),a=c(o,4);let d=l.slice(0,3),u=l.slice(3,6),m=(l.slice(6,9),l.slice(9,12)),p=(l.slice(12,15),l.slice(15,18)),_=i.slice(0,3),g=(i.slice(3,6),i.slice(6,9)),f=(i.slice(9,12),i.slice(12,15)),y=i.slice(15,18),h=a.slice(0,2),v=a.slice(2,4);const L=d+_+h+u+_+v+m+f+v+m+g+h+p+g+v+u+y+h,b=[];for(let e=0;e<L.length;e+=8){const t=L.slice(e,e+8).split("");for(let e=0;e<8;e++)t[e]=+t[e];b.push(...t)}return b})();console.log(t);const n=(e=>{const t=[];for(let n=0;n<48;n+=8){const s=e.slice(n,n+8);r(s),t.push(s)}return t})(t);console.log(n),1==g.textContent&&(console.warn("============"),p.disabled=!0,f.disabled=!0),h(n[0]),(e=>{_.addEventListener("click",(()=>{let t=+g.textContent;console.log(e[t]),_.disabled=!1,p.disabled=!1,y.disabled=!1,f.disabled=!1,h(e[t]),g.textContent=t+1,t>=5&&(_.disabled=!0,p.disabled=!1,y.disabled=!0)}))})(n),(e=>{p.addEventListener("click",(()=>{let t=+g.textContent;console.log(e[t-2]),p.disabled=!1,_.disabled=!1,y.disabled=!1,h(e[t-2]),g.textContent=t-1,t-1<=1&&(p.disabled=!0,_.disabled=!1,f.disabled=!0)}))})(n),(e=>{y.addEventListener("mousedown",(()=>{h(e[e.length-1]),console.log(e[e.length-1]),_.disabled=!0,p.disabled=!1,g.textContent=e.length,y.disabled=!0,f.disabled=!1,console.log("++")}))})(n),(e=>{f.addEventListener("mousedown",(()=>{h(e[0]),console.log(e[0]),_.disabled=!1,p.disabled=!0,g.textContent=1,f.disabled=!0,y.disabled=!1}))})(n)},L=document.querySelector(".pagination_left"),b=document.querySelector(".pagination_right"),S=document.querySelector(".friends__list"),q=()=>Math.floor(8*Math.random()+0),E=(e,t)=>e.some((e=>e===t)),x=(e,t)=>{if(t){for(;t.length<e;){const e=q();E(t,e)||t.push(e)}return t}{const t=[];for(;t.length<e;){const e=q();E(t,e)||t.push(e)}return t}},w=({id:e,name:t,imageSlider:n})=>{const s=document.createElement("div");s.className="friend-card",s.id=e;const o=document.createElement("img");o.className="friend-card__img",o.src=n;const c=document.createElement("p");c.className="friend-card__title",c.textContent=t;const l=document.createElement("button");return l.className="friend-card__button button",l.textContent="Learn more",s.append(o,c,l),s},M=async(e,t)=>{const n=await d("../fonts/pets.json"),s=e.map((e=>w(n[e]))),o=document.createElement("li");return o.className="friends__item",o.id=t,o.append(...s),o},C=async(e,t)=>{const n=await d("../fonts/pets.json"),s=e.map((e=>w(n[e])));return s},k=(e,t)=>{const n=[...t];return x(2*e,n).splice(e,e)},T=()=>{const e=document.body.offsetWidth,t=S.offsetWidth;console.log(t),e>1200?S.classList.add("move_left990"):e<=650?S.classList.add("move_left270"):S.classList.add("move_left700"),L.removeEventListener("click",T)},H=()=>{const e=document.body.offsetWidth,t=S.offsetWidth;console.log(t),e>1200?S.classList.add("move_right990"):e<=650?S.classList.add("move_right270"):S.classList.add("move_right700"),b.removeEventListener("click",H)},W=()=>{const e=document.querySelectorAll("#current .friend-card"),t=[];return e.forEach((e=>{t.push(+e.id)})),t},A=async e=>{console.log("count in controlSLIDER",e);const t=x(e);console.log("currentArray: ",t);const n=k(e,t);console.log("leftArray: ",n);const s=k(e,t);console.log("rightArray: ",s);const o=await M(t,"current"),c=await M(n,"left"),l=await M(s,"right"),i=document.querySelector(".friends__list");i.innerHTML="",i.append(c,o,l),L.addEventListener("click",T),b.addEventListener("click",H),((e,t)=>{e.addEventListener("animationend",(async n=>{if(e.className="friends__list","left"===n.animationName.slice(0,4)){const e=document.querySelector("#right"),n=document.querySelector("#current");console.warn("right===",e),console.warn("current===",n),n.innerHTML=e.innerHTML,L.addEventListener("click",T);const s=W(),o=k(t,s),c=await C(o);console.log(c),e.innerHTML="",e.append(...c)}else{const e=document.querySelector("#left");document.querySelector("#current").innerHTML=e.innerHTML,b.addEventListener("click",H);const n=W(),s=k(t,n),o=await C(s);console.log(o),e.innerHTML="",e.append(...o)}}))})(i,e)};(()=>{if("/pets.html"===document.location.pathname){let e;i();const t=document.body.offsetWidth;t>=1280&&(e=8),v()}else{let e;i(),u();const t=document.body.offsetWidth;if(t>1200){document.querySelector(".friends__list").style.left="-1080px",e=3}else if(t>650&&t<=1200){document.querySelector(".friends__list").style.left="-620px",e=2}else{document.querySelector(".friends__list").style.left="-270px",e=1}A(e);const n=window.matchMedia("(min-width: 1200px)");n.addEventListener("change",(e=>{if(n.matches){document.querySelector(".friends__list").style.left="-1080px",A(3)}}));const s=window.matchMedia("(max-width: 1200px) and (min-width: 650px)");s.addEventListener("change",(e=>{if(s.matches){document.querySelector(".friends__list").style.left="-620px",A(2)}}));const o=window.matchMedia("(max-width: 650px) and (min-width: 320px)");o.addEventListener("change",(e=>{if(o.matches){document.querySelector(".friends__list").style.left="-270px",A(1)}}))}})()})();